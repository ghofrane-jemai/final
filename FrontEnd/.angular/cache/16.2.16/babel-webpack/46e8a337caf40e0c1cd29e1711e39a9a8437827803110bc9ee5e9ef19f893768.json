{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"videoElement\"];\nconst _c1 = [\"canvasElement\"];\nfunction HomeComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const country_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", country_r15);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(country_r15);\n  }\n}\nfunction HomeComponent_option_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const city_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", city_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(city_r16);\n  }\n}\nfunction HomeComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.ageError);\n  }\n}\nfunction HomeComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.dateError);\n  }\n}\nexport class HomeComponent {\n  constructor(http) {\n    this.http = http;\n    this.videoElement = null;\n    this.canvasElement = null;\n    this.user = {\n      firstName: '',\n      lastName: '',\n      country: '',\n      city: '',\n      dob: '',\n      gender: '',\n      idCardFront: null,\n      idCardBack: null,\n      selfie: null // Permettre null\n    };\n\n    this.ageError = '';\n    this.dateError = '';\n    this.countries = [\"Afghanistan\"];\n    this.citiesByCountry = {\n      \"Afghanistan\": [\"Kabul\", \"Kandahar\", \"Herat\", \"Mazar-i-Sharif\", \"Jalalabad\"]\n    };\n    this.cities = [];\n  }\n  startCamera() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        if (this.videoElement) {\n          this.videoElement.nativeElement.srcObject = stream;\n        }\n      }).catch(err => {\n        console.error('Error accessing the camera: ', err);\n      });\n    }\n  }\n  takeSelfie() {\n    const video = this.videoElement?.nativeElement;\n    const canvas = this.canvasElement?.nativeElement;\n    const ctx = canvas?.getContext('2d');\n    if (video && canvas && ctx) {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      this.user.selfie = canvas.toDataURL('image/png');\n      const selfiePreview = document.getElementById('selfiePreview');\n      if (selfiePreview) {\n        if (selfiePreview) {\n          selfiePreview.src = this.user.selfie ? this.user.selfie : ''; // Utiliser une chaîne vide si selfie est null\n        }\n      }\n\n      const payload = {\n        selfie: this.user.selfie\n      };\n      this.http.post('http://localhost:5000/api/users', payload).subscribe(response => {\n        console.log('Utilisateur ajouté avec succès', response);\n      }, error => {\n        console.error('Erreur lors de l\\'ajout de l\\'utilisateur', error);\n      });\n    }\n  }\n  onCountryChange() {\n    const selectedCountry = this.user.country;\n    this.cities = this.citiesByCountry[selectedCountry] || [];\n    this.user.city = '';\n  }\n  onDateChange() {\n    const birthdate = new Date(this.user.dob);\n    const today = new Date();\n    if (birthdate.getFullYear() > today.getFullYear()) {\n      this.dateError = \"Choix incorrect : l'année choisie ne peut pas être supérieure à l'année actuelle.\";\n      this.ageError = \"\";\n      return;\n    } else {\n      this.dateError = \"\";\n    }\n    const age = today.getFullYear() - birthdate.getFullYear();\n    const monthDiff = today.getMonth() - birthdate.getMonth();\n    if (age < 18 || age === 18 && monthDiff < 0) {\n      this.ageError = \"Vous devez avoir au moins 18 ans.\";\n    } else {\n      this.ageError = \"\";\n    }\n  }\n  onSubmit() {\n    const birthdate = new Date(this.user.dob);\n    const today = new Date();\n    if (birthdate.getFullYear() > today.getFullYear()) {\n      alert(\"Choix incorrect : l'année choisie ne peut pas être supérieure à l'année actuelle.\");\n      return;\n    }\n    const age = today.getFullYear() - birthdate.getFullYear();\n    const monthDiff = today.getMonth() - birthdate.getMonth();\n    if (age < 18 || age === 18 && monthDiff < 0) {\n      alert(\"Vous devez avoir au moins 18 ans.\");\n      return;\n    }\n    const userData = {\n      firstName: this.user.firstName,\n      lastName: this.user.lastName,\n      country: this.user.country,\n      city: this.user.city,\n      dob: this.formatDate(this.user.dob),\n      gender: this.user.gender,\n      idCardFront: this.user.idCardFront,\n      idCardBack: this.user.idCardBack,\n      selfie: this.user.selfie // Peut être null\n    };\n\n    this.http.post('http://localhost:5000/api/users', userData).subscribe(response => {\n      console.log('Utilisateur ajouté:', response);\n      this.user = {\n        firstName: '',\n        lastName: '',\n        country: '',\n        city: '',\n        dob: '',\n        gender: '',\n        idCardFront: null,\n        idCardBack: null,\n        selfie: null // Réinitialiser à null\n      };\n    }, error => {\n      console.error('Erreur lors de l\\'ajout:', error);\n      alert('Erreur lors de l\\'enregistrement: ' + error.error.message);\n    });\n    console.log('Données utilisateur envoyées:', userData);\n  }\n  formatDate(date) {\n    const d = new Date(date);\n    const day = String(d.getDate()).padStart(2, '0');\n    const month = String(d.getMonth() + 1).padStart(2, '0');\n    const year = d.getFullYear();\n    return `${day}/${month}/${year}`;\n  }\n  static {\n    this.ɵfac = function HomeComponent_Factory(t) {\n      return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomeComponent,\n      selectors: [[\"app-home\"]],\n      viewQuery: function HomeComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoElement = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvasElement = _t.first);\n        }\n      },\n      decls: 67,\n      vars: 13,\n      consts: [[\"href\", \"https://fonts.googleapis.com/css2?family=Caveat:wght@400;600&display=swap\", \"rel\", \"stylesheet\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [\"for\", \"firstName\"], [\"name\", \"firstName\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"firstName\", \"ngModel\"], [\"for\", \"lastName\"], [\"name\", \"lastName\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"lastName\", \"ngModel\"], [\"for\", \"country\"], [\"name\", \"country\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"country\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"city\"], [\"name\", \"city\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"city\", \"ngModel\"], [\"for\", \"dob\"], [\"type\", \"date\", \"name\", \"dob\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"dob\", \"ngModel\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [\"for\", \"selfie\"], [\"type\", \"button\", 3, \"click\"], [\"width\", \"320\", \"height\", \"240\", \"autoplay\", \"\"], [\"videoElement\", \"\"], [2, \"display\", \"none\"], [\"canvasElement\", \"\"], [\"for\", \"idCardFront\"], [\"type\", \"file\", \"name\", \"idCardFront\", \"accept\", \"image/*\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"idCardFront\", \"ngModel\"], [\"for\", \"idCardBack\"], [\"type\", \"file\", \"name\", \"idCardBack\", \"accept\", \"image/*\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"idCardBack\", \"ngModel\"], [\"for\", \"gender\"], [\"name\", \"gender\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"gender\", \"ngModel\"], [\"value\", \"male\"], [\"value\", \"female\"], [\"type\", \"submit\", 3, \"disabled\"], [3, \"value\"], [2, \"color\", \"red\"]],\n      template: function HomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\");\n          i0.ɵɵtext(1, \"Ouvrez votre avenir financier avec nous ! \");\n          i0.ɵɵelementStart(2, \"head\");\n          i0.ɵɵelement(3, \"link\", 0);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"form\", 1, 2);\n          i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(6, \"div\")(7, \"label\", 3);\n          i0.ɵɵtext(8, \"First Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 4, 5);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_9_listener($event) {\n            return ctx.user.firstName = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\")(12, \"label\", 6);\n          i0.ɵɵtext(13, \"Last Name:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 7, 8);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_14_listener($event) {\n            return ctx.user.lastName = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\")(17, \"label\", 9);\n          i0.ɵɵtext(18, \"Country:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"select\", 10, 11);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_19_listener($event) {\n            return ctx.user.country = $event;\n          })(\"change\", function HomeComponent_Template_select_change_19_listener() {\n            return ctx.onCountryChange();\n          });\n          i0.ɵɵtemplate(21, HomeComponent_option_21_Template, 2, 2, \"option\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\")(23, \"label\", 13);\n          i0.ɵɵtext(24, \"City:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"select\", 14, 15);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_25_listener($event) {\n            return ctx.user.city = $event;\n          });\n          i0.ɵɵtemplate(27, HomeComponent_option_27_Template, 2, 2, \"option\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"div\")(29, \"label\", 16);\n          i0.ɵɵtext(30, \"Date of Birth:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"input\", 17, 18);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_31_listener($event) {\n            return ctx.user.dob = $event;\n          })(\"change\", function HomeComponent_Template_input_change_31_listener() {\n            return ctx.onDateChange();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(33, HomeComponent_div_33_Template, 2, 1, \"div\", 19);\n          i0.ɵɵtemplate(34, HomeComponent_div_34_Template, 2, 1, \"div\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"div\")(36, \"label\", 20);\n          i0.ɵɵtext(37, \"Prenez une selfie:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"button\", 21);\n          i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_38_listener() {\n            return ctx.startCamera();\n          });\n          i0.ɵɵtext(39, \"Activer la cam\\u00E9ra\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(40, \"video\", 22, 23)(42, \"canvas\", 24, 25);\n          i0.ɵɵelementStart(44, \"button\", 21);\n          i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_44_listener() {\n            return ctx.takeSelfie();\n          });\n          i0.ɵɵtext(45, \"Prendre la selfie\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(46, \"div\")(47, \"label\", 26);\n          i0.ɵɵtext(48, \"Carte d'identit\\u00E9 - Recto:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(49, \"input\", 27, 28);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_49_listener($event) {\n            return ctx.user.idCardFront = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(51, \"div\")(52, \"label\", 29);\n          i0.ɵɵtext(53, \"Carte d'identit\\u00E9 - Verso:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"input\", 30, 31);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_54_listener($event) {\n            return ctx.user.idCardBack = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(56, \"div\")(57, \"label\", 32);\n          i0.ɵɵtext(58, \"Gender:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"select\", 33, 34);\n          i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_59_listener($event) {\n            return ctx.user.gender = $event;\n          });\n          i0.ɵɵelementStart(61, \"option\", 35);\n          i0.ɵɵtext(62, \"Male\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(63, \"option\", 36);\n          i0.ɵɵtext(64, \"Female\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(65, \"button\", 37);\n          i0.ɵɵtext(66, \"Submit\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const _r0 = i0.ɵɵreference(5);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.firstName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.lastName);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.country);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.countries);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.city);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.cities);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.dob);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.ageError);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.dateError);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.idCardFront);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.idCardBack);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngModel\", ctx.user.gender);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", !_r0.valid);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n      styles: [\"@charset \\\"UTF-8\\\";\\n\\n\\n\\n\\nform[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: 2rem auto;\\n  padding: 2rem;\\n  background: linear-gradient(145deg, #ffffff, #f0f0f0);\\n  border-radius: 15px;\\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\\n}\\nform[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-5px);\\n  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);\\n}\\n\\n\\n\\nlabel[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-bottom: 0.5rem;\\n  font-weight: 600;\\n  color: #333;\\n}\\n\\n\\n\\ninput[_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 0.75rem;\\n  margin-bottom: 1rem;\\n  border: 1px solid #ddd;\\n  border-radius: 8px;\\n  font-size: 1rem;\\n  color: #555;\\n  background-color: #f9f9f9;\\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\\n}\\ninput[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus {\\n  border-color: #007bff;\\n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);\\n  outline: none;\\n}\\n\\n\\n\\nbutton[_ngcontent-%COMP%] {\\n  display: block;\\n  width: 100%;\\n  padding: 1rem;\\n  background: linear-gradient(145deg, #007bff, #0056b3);\\n  color: white;\\n  border: none;\\n  border-radius: 8px;\\n  font-size: 1rem;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: background 0.3s ease, transform 0.3s ease;\\n}\\nbutton[_ngcontent-%COMP%]:hover {\\n  background: linear-gradient(145deg, #0056b3, #007bff);\\n  transform: translateY(-2px);\\n}\\nbutton[_ngcontent-%COMP%]:disabled {\\n  background: #ccc;\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: #dc3545;\\n  font-size: 0.875rem;\\n  margin-top: -0.5rem;\\n  margin-bottom: 1rem;\\n  animation: _ngcontent-%COMP%_fadeIn 0.5s ease;\\n}\\n\\n@keyframes _ngcontent-%COMP%_fadeIn {\\n  from {\\n    opacity: 0;\\n    transform: translateY(-10px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n\\n\\nselect[_ngcontent-%COMP%] {\\n  appearance: none;\\n  background-image: url(\\\"data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007bff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E\\\");\\n  background-repeat: no-repeat;\\n  background-position: right 0.75rem center;\\n  background-size: 12px;\\n}\\n\\n\\n\\ndiv[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n}\\n\\n\\n\\nh2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 2rem;\\n  font-size: 4rem; \\n\\n  color: #007bff;\\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\\n  font-family: \\\"Caveat\\\", cursive; \\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUFoQix3QkFBQTtBQUVBLGdDQUFBO0FBQ0E7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLHFEQUFBO0VBQ0EsbUJBQUE7RUFDQSwwQ0FBQTtFQUNBLHFEQUFBO0FBQ0Y7QUFDRTtFQUNFLDJCQUFBO0VBQ0EsMENBQUE7QUFDSjs7QUFHQSxxQkFBQTtBQUNBO0VBQ0UsY0FBQTtFQUNBLHFCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0FBQUY7O0FBR0EsZ0NBQUE7QUFDQTtFQUNFLFdBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0VBQ0EseUJBQUE7RUFDQSx3REFBQTtBQUFGO0FBRUU7RUFDRSxxQkFBQTtFQUNBLDBDQUFBO0VBQ0EsYUFBQTtBQUFKOztBQUlBLGtDQUFBO0FBQ0E7RUFDRSxjQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxxREFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EscURBQUE7QUFERjtBQUdFO0VBQ0UscURBQUE7RUFDQSwyQkFBQTtBQURKO0FBSUU7RUFDRSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtBQUZKOztBQU1BLHlDQUFBO0FBQ0E7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EsMkJBQUE7QUFIRjs7QUFNQTtFQUNFO0lBQ0UsVUFBQTtJQUNBLDRCQUFBO0VBSEY7RUFLQTtJQUNFLFVBQUE7SUFDQSx3QkFBQTtFQUhGO0FBQ0Y7QUFNQSxrREFBQTtBQUNBO0VBQ0UsZ0JBQUE7RUFDQSxvZkFBQTtFQUNBLDRCQUFBO0VBQ0EseUNBQUE7RUFDQSxxQkFBQTtBQUpGOztBQU9BLHVDQUFBO0FBQ0E7RUFDRSxxQkFBQTtBQUpGOztBQU9BLHNDQUFBO0FBQ0E7RUFDRSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQSxFQUFBLG9DQUFBO0VBQ0EsY0FBQTtFQUNBLDJDQUFBO0VBQ0EsOEJBQUEsRUFBQSwrQkFBQTtBQUpGIiwic291cmNlc0NvbnRlbnQiOlsiLyogaG9tZS5jb21wb25lbnQuc2NzcyAqL1xuXG4vKiBTdHlsZSBnw4PCqW7Dg8KpcmFsIGR1IGZvcm11bGFpcmUgKi9cbmZvcm0ge1xuICBtYXgtd2lkdGg6IDYwMHB4O1xuICBtYXJnaW46IDJyZW0gYXV0bztcbiAgcGFkZGluZzogMnJlbTtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgI2ZmZmZmZiwgI2YwZjBmMCk7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZSwgYm94LXNoYWRvdyAwLjNzIGVhc2U7XG5cbiAgJjpob3ZlciB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xuICAgIGJveC1zaGFkb3c6IDAgMTVweCA0MHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgfVxufVxuXG4vKiBTdHlsZSBkZXMgbGFiZWxzICovXG5sYWJlbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiAjMzMzO1xufVxuXG4vKiBTdHlsZSBkZXMgaW5wdXRzIGV0IHNlbGVjdHMgKi9cbmlucHV0LCBzZWxlY3Qge1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogMC43NXJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBmb250LXNpemU6IDFyZW07XG4gIGNvbG9yOiAjNTU1O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xuICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcyBlYXNlLCBib3gtc2hhZG93IDAuM3MgZWFzZTtcblxuICAmOmZvY3VzIHtcbiAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7XG4gICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsIDEyMywgMjU1LCAwLjMpO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH1cbn1cblxuLyogU3R5bGUgZHUgYm91dG9uIGRlIHNvdW1pc3Npb24gKi9cbmJ1dHRvbiB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZzogMXJlbTtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE0NWRlZywgIzAwN2JmZiwgIzAwNTZiMyk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuM3MgZWFzZSwgdHJhbnNmb3JtIDAuM3MgZWFzZTtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTQ1ZGVnLCAjMDA1NmIzLCAjMDA3YmZmKTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gIH1cblxuICAmOmRpc2FibGVkIHtcbiAgICBiYWNrZ3JvdW5kOiAjY2NjO1xuICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgdHJhbnNmb3JtOiBub25lO1xuICB9XG59XG5cbi8qIEFuaW1hdGlvbiBwb3VyIGxlcyBtZXNzYWdlcyBkJ2VycmV1ciAqL1xuLmVycm9yLW1lc3NhZ2Uge1xuICBjb2xvcjogI2RjMzU0NTtcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgbWFyZ2luLXRvcDogLTAuNXJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgYW5pbWF0aW9uOiBmYWRlSW4gMC41cyBlYXNlO1xufVxuXG5Aa2V5ZnJhbWVzIGZhZGVJbiB7XG4gIGZyb20ge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgfVxuICB0byB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gIH1cbn1cblxuLyogU3R5bGUgcG91ciBsZXMgc8ODwqlsZWN0ZXVycyBkZSBwYXlzIGV0IGRlIHZpbGxlICovXG5zZWxlY3Qge1xuICBhcHBlYXJhbmNlOiBub25lO1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VUy1BU0NJSSwlM0NzdmclMjB4bWxucyUzRCUyMmh0dHAlM0ElMkYlMkZ3d3cudzMub3JnJTJGMjAwMCUyRnN2ZyUyMiUyMHdpZHRoJTNEJTIyMjkyLjQlMjIlMjBoZWlnaHQlM0QlMjIyOTIuNCUyMiUzRSUzQ3BhdGglMjBmaWxsJTNEJTIyJTIzMDA3YmZmJTIyJTIwZCUzRCUyMk0yODclMjA2OS40YTE3LjYlMjAxNy42JTIwMCUyMDAlMjAwLTEzLTUuNEgxOC40Yy01JTIwMC05LjMlMjAxLjgtMTIuOSUyMDUuNEExNy42JTIwMTcuNiUyMDAlMjAwJTIwMCUyMDAlMjA4Mi4yYzAlMjA1JTIwMS44JTIwOS4zJTIwNS40JTIwMTIuOWwxMjglMjAxMjcuOWMzLjYlMjAzLjYlMjA3LjglMjA1LjQlMjAxMi44JTIwNS40czkuMi0xLjglMjAxMi44LTUuNEwyODclMjA5NWMzLjUtMy41JTIwNS40LTcuOCUyMDUuNC0xMi44JTIwMC01LTEuOS05LjItNS41LTEyLjh6JTIyJTJGJTNFJTNDJTJGc3ZnJTNFXCIpO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiByaWdodCAwLjc1cmVtIGNlbnRlcjtcbiAgYmFja2dyb3VuZC1zaXplOiAxMnB4O1xufVxuXG4vKiBTdHlsZSBwb3VyIGxlIGNvbnRlbmV1ciBkZXMgY2hhbXBzICovXG5kaXYge1xuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG59XG5cbi8qIFN0eWxlIHBvdXIgbGUgdGl0cmUgZHUgZm9ybXVsYWlyZSAqL1xuaDIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDJyZW07XG4gIGZvbnQtc2l6ZTogNHJlbTsgLyogQWp1c3RleiBsYSB0YWlsbGUgc2kgbsODwqljZXNzYWlyZSAqL1xuICBjb2xvcjogIzAwN2JmZjtcbiAgdGV4dC1zaGFkb3c6IDJweCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgZm9udC1mYW1pbHk6ICdDYXZlYXQnLCBjdXJzaXZlOyAvKiBBcHBsaXF1ZSBsYSBwb2xpY2UgUG9wcGlucyAqL1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","country_r15","ɵɵadvance","ɵɵtextInterpolate","city_r16","ctx_r8","ageError","ctx_r9","dateError","HomeComponent","constructor","http","videoElement","canvasElement","user","firstName","lastName","country","city","dob","gender","idCardFront","idCardBack","selfie","countries","citiesByCountry","cities","startCamera","navigator","mediaDevices","getUserMedia","video","then","stream","nativeElement","srcObject","catch","err","console","error","takeSelfie","canvas","ctx","getContext","width","videoWidth","height","videoHeight","drawImage","toDataURL","selfiePreview","document","getElementById","src","payload","post","subscribe","response","log","onCountryChange","selectedCountry","onDateChange","birthdate","Date","today","getFullYear","age","monthDiff","getMonth","onSubmit","alert","userData","formatDate","message","date","d","day","String","getDate","padStart","month","year","ɵɵdirectiveInject","i1","HttpClient","selectors","viewQuery","HomeComponent_Query","rf","ɵɵelement","ɵɵlistener","HomeComponent_Template_form_ngSubmit_4_listener","HomeComponent_Template_input_ngModelChange_9_listener","$event","HomeComponent_Template_input_ngModelChange_14_listener","HomeComponent_Template_select_ngModelChange_19_listener","HomeComponent_Template_select_change_19_listener","ɵɵtemplate","HomeComponent_option_21_Template","HomeComponent_Template_select_ngModelChange_25_listener","HomeComponent_option_27_Template","HomeComponent_Template_input_ngModelChange_31_listener","HomeComponent_Template_input_change_31_listener","HomeComponent_div_33_Template","HomeComponent_div_34_Template","HomeComponent_Template_button_click_38_listener","HomeComponent_Template_button_click_44_listener","HomeComponent_Template_input_ngModelChange_49_listener","HomeComponent_Template_input_ngModelChange_54_listener","HomeComponent_Template_select_ngModelChange_59_listener","_r0","valid"],"sources":["D:\\3emeISAMM\\PFE\\Code\\user-form\\src\\app\\home\\home.component.ts","D:\\3emeISAMM\\PFE\\Code\\user-form\\src\\app\\home\\home.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, ElementRef, ViewChild } from '@angular/core';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent {\n  @ViewChild('videoElement') videoElement: ElementRef | null = null;\n  @ViewChild('canvasElement') canvasElement: ElementRef | null = null;\n\n  user = {\n    firstName: '',\n    lastName: '',\n    country: '',\n    city: '',\n    dob: '',\n    gender: '',\n    idCardFront: null as string | null, // Permettre null\n    idCardBack: null as string | null,  // Permettre null\n    selfie: null as string | null        // Permettre null\n  };\n\n  ageError: string = '';\n  dateError: string = '';\n\n  countries: string[] = [\n    \"Afghanistan\"\n  ];\n\n  citiesByCountry: { [key: string]: string[] } = {\n    \"Afghanistan\": [\"Kabul\", \"Kandahar\", \"Herat\", \"Mazar-i-Sharif\", \"Jalalabad\"]\n  };\n\n  cities: string[] = [];\n\n  constructor(private http: HttpClient) {}\n\n  startCamera() {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({ video: true })\n        .then((stream) => {\n          if (this.videoElement) {\n            this.videoElement.nativeElement.srcObject = stream;\n          }\n        })\n        .catch((err) => {\n          console.error('Error accessing the camera: ', err);\n        });\n    }\n  }\n\n  takeSelfie() {\n    const video = this.videoElement?.nativeElement;\n    const canvas = this.canvasElement?.nativeElement;\n    const ctx = canvas?.getContext('2d');\n  \n    if (video && canvas && ctx) {\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n      this.user.selfie = canvas.toDataURL('image/png');\n  \n      const selfiePreview = document.getElementById('selfiePreview') as HTMLImageElement;\n      if (selfiePreview) {\n        if (selfiePreview) {\n          selfiePreview.src = this.user.selfie ? this.user.selfie : ''; // Utiliser une chaîne vide si selfie est null\n        }\n              }\n  \n      const payload = {\n        selfie: this.user.selfie,\n      };\n  \n      this.http.post('http://localhost:5000/api/users', payload).subscribe(\n        response => {\n          console.log('Utilisateur ajouté avec succès', response);\n        },\n        error => {\n          console.error('Erreur lors de l\\'ajout de l\\'utilisateur', error);\n        }\n      );\n    }\n  }\n\n  onCountryChange() {\n    const selectedCountry = this.user.country;\n    this.cities = this.citiesByCountry[selectedCountry] || [];\n    this.user.city = '';\n  }\n\n  onDateChange() {\n    const birthdate = new Date(this.user.dob);\n    const today = new Date();\n    \n    if (birthdate.getFullYear() > today.getFullYear()) {\n      this.dateError = \"Choix incorrect : l'année choisie ne peut pas être supérieure à l'année actuelle.\";\n      this.ageError = \"\";\n      return;\n    } else {\n      this.dateError = \"\";\n    }\n\n    const age = today.getFullYear() - birthdate.getFullYear();\n    const monthDiff = today.getMonth() - birthdate.getMonth();\n\n    if (age < 18 || (age === 18 && monthDiff < 0)) {\n      this.ageError = \"Vous devez avoir au moins 18 ans.\";\n    } else {\n      this.ageError = \"\";\n    }\n  }\n\n  onSubmit() {\n    const birthdate = new Date(this.user.dob);\n    const today = new Date();\n\n    if (birthdate.getFullYear() > today.getFullYear()) {\n      alert(\"Choix incorrect : l'année choisie ne peut pas être supérieure à l'année actuelle.\");\n      return;\n    }\n\n    const age = today.getFullYear() - birthdate.getFullYear();\n    const monthDiff = today.getMonth() - birthdate.getMonth();\n\n    if (age < 18 || (age === 18 && monthDiff < 0)) {\n      alert(\"Vous devez avoir au moins 18 ans.\");\n      return;\n    }\n\n    const userData = {\n      firstName: this.user.firstName,\n      lastName: this.user.lastName,\n      country: this.user.country,\n      city: this.user.city,\n      dob: this.formatDate(this.user.dob),\n      gender: this.user.gender,\n      idCardFront: this.user.idCardFront, // Peut être null\n      idCardBack: this.user.idCardBack,   // Peut être null\n      selfie: this.user.selfie              // Peut être null\n    };\n\n    this.http.post('http://localhost:5000/api/users', userData)\n      .subscribe(\n        (response) => {\n          console.log('Utilisateur ajouté:', response);\n          this.user = {\n            firstName: '',\n            lastName: '',\n            country: '',\n            city: '',\n            dob: '',\n            gender: '',\n            idCardFront: null, // Réinitialiser à null\n            idCardBack: null,  // Réinitialiser à null\n            selfie: null       // Réinitialiser à null\n          };\n        },\n        (error) => {\n          console.error('Erreur lors de l\\'ajout:', error);\n          alert('Erreur lors de l\\'enregistrement: ' + error.error.message);\n        }\n      );\n      console.log('Données utilisateur envoyées:', userData);\n\n  }\n\n  formatDate(date: string): string {\n    const d = new Date(date);\n    const day = String(d.getDate()).padStart(2, '0');\n    const month = String(d.getMonth() + 1).padStart(2, '0');\n    const year = d.getFullYear();\n    return `${day}/${month}/${year}`;\n  }\n}\n","<h2>Ouvrez votre avenir financier avec nous !\n  <head>\n    <link href=\"https://fonts.googleapis.com/css2?family=Caveat:wght@400;600&display=swap\" rel=\"stylesheet\">\n  </head>\n  \n</h2>\n<form (ngSubmit)=\"onSubmit()\" #form=\"ngForm\">\n  <div>\n    <label for=\"firstName\">First Name:</label>\n    <input [(ngModel)]=\"user.firstName\" name=\"firstName\" required #firstName=\"ngModel\">\n  </div>\n\n  <div>\n    <label for=\"lastName\">Last Name:</label>\n    <input [(ngModel)]=\"user.lastName\" name=\"lastName\" required #lastName=\"ngModel\">\n  </div>\n\n  <div>\n    <label for=\"country\">Country:</label>\n    <select [(ngModel)]=\"user.country\" name=\"country\" required #country=\"ngModel\" (change)=\"onCountryChange()\">\n      <option *ngFor=\"let country of countries\" [value]=\"country\">{{ country }}</option>\n    </select>\n  </div>\n\n  <!-- Sélection de la ville -->\n  <div>\n    <label for=\"city\">City:</label>\n    <select [(ngModel)]=\"user.city\" name=\"city\" required #city=\"ngModel\">\n      <option *ngFor=\"let city of cities\" [value]=\"city\">{{ city }}</option>\n    </select>\n  </div>\n\n  <div>\n    <label for=\"dob\">Date of Birth:</label>\n    <input type=\"date\" [(ngModel)]=\"user.dob\" name=\"dob\" required #dob=\"ngModel\" (change)=\"onDateChange()\">\n    <div *ngIf=\"ageError\" style=\"color: red;\">{{ ageError }}</div>\n    <div *ngIf=\"dateError\" style=\"color: red;\">{{ dateError }}</div>\n  </div>\n  <div>\n    <label for=\"selfie\">Prenez une selfie:</label>\n    <button type=\"button\" (click)=\"startCamera()\">Activer la caméra</button>\n    <video #videoElement width=\"320\" height=\"240\" autoplay></video>\n    <canvas #canvasElement style=\"display:none\"></canvas>\n    <button type=\"button\" (click)=\"takeSelfie()\">Prendre la selfie</button>\n  </div>\n  \n  <div>\n    <label for=\"idCardFront\">Carte d'identité - Recto:</label>\n    <input type=\"file\" [(ngModel)]=\"user.idCardFront\" name=\"idCardFront\" accept=\"image/*\" required #idCardFront=\"ngModel\">\n  </div>\n  \n  <div>\n    <label for=\"idCardBack\">Carte d'identité - Verso:</label>\n    <input type=\"file\" [(ngModel)]=\"user.idCardBack\" name=\"idCardBack\" accept=\"image/*\" required #idCardBack=\"ngModel\">\n  </div>\n  \n\n  <div>\n    <label for=\"gender\">Gender:</label>\n    <select [(ngModel)]=\"user.gender\" name=\"gender\" required #gender=\"ngModel\">\n      <option value=\"male\">Male</option>\n      <option value=\"female\">Female</option>\n    </select>\n  </div>\n\n  <button type=\"submit\" [disabled]=\"!form.valid\">Submit</button>\n</form>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}